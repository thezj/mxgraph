<!DOCTYPE html>
<html>
  <head>
    <title>7.联锁接口文件说明</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/7_联锁接口文件说明/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/7_联锁接口文件说明/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (Rectangle) -->
      <div id="u888" class="ax_default _文本段落">
        <div id="u888_div" class=""></div>
        <div id="u888_text" class="text ">
          <p><span><br></span></p><p><span>MDIAS与联锁通过串口连接。</span></p><p><span>联锁系统采用双机热备，即当工作站A挂掉之后，可由工作站B接管，因此MDIAS与联锁A、B机的所有</span></p><p><span>接口都做物理连接，并能通过所有串口采集和发送数据。</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u889" class="ax_default _图片_">
        <img id="u889_img" class="img " src="images/7_联锁接口文件说明/u889.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u890" class="ax_default _图片_">
        <img id="u890_img" class="img " src="images/7_联锁接口文件说明/u890.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u891" class="ax_default _文本段落">
        <div id="u891_div" class=""></div>
        <div id="u891_text" class="text ">
          <p><span>注意进行串口通信时的通信参数配置</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u892" class="ax_default _连接线">
        <img id="u892_seg0" class="img " src="images/7_联锁接口文件说明/u892_seg0.png" alt="u892_seg0"/>
        <div id="u892_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u893" class="ax_default _文本段落">
        <div id="u893_div" class=""></div>
        <div id="u893_text" class="text ">
          <p><span>使用CRC校验</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u894" class="ax_default _图片_">
        <img id="u894_img" class="img " src="images/7_联锁接口文件说明/u894.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u895" class="ax_default _文本段落">
        <div id="u895_div" class=""></div>
        <div id="u895_text" class="text ">
          <p><span>帧头为0x7D，帧尾为0x7E</span></p><p><span>&nbsp;所有除帧头帧尾的数据 都要做一次转义。</span></p><p><span>0x7D-&gt;0x7F 0x7D</span></p><p><span>0x7E-&gt;0x7F 0x7E</span></p><p><span>转义字符也需要转义</span></p><p><span>0x7F-&gt;0x7F 0xFF</span></p><p><span>在发送数据时，先做CRC计算，并填写CRC值，再做转义处理</span></p><p><span>在接收数据时，先转义处理，再做CRC校验。</span></p><p><span>CRC校验码生成多项式为：</span></p><p><span>G(X)=X16+X12+X5+1</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u896" class="ax_default _文本段落">
        <div id="u896_div" class=""></div>
        <div id="u896_text" class="text ">
          <p><span>注意，通讯使用低字节在前，高字节在后的小端字节序</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u897" class="ax_default _图片_">
        <img id="u897_img" class="img " src="images/7_联锁接口文件说明/u897.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u898" class="ax_default _文本段落">
        <div id="u898_div" class=""></div>
        <div id="u898_text" class="text ">
          <p><span>码位文件：</span></p><p><span>码位文件定义了站场表示数据字段里，每个设备数据的顺序。</span></p><p><span>如图 第一行 表示 开始解析道岔数据，第二行表示 第一个数据是道岔1，第三行表示，第二个数据是道岔3，以此类推。</span></p><p><span>道岔的解析方式，如图，接口文件约定为2个字节，因此首先从数据帧中取出2个字节，按位解析，得到道岔1的道岔状态数据，再取出2个字节按位解析，得到道岔3的状态数据，其他数据以此类推。</span></p><p><span><br></span></p><p><span style="color:#FF0000;">注意</span></p><p><span style="color:#FF0000;">站场图上，某些区段可能表示多条路径，需要根据道岔开向来确定该区段到底表示哪一条路径，这种道岔组合 学名叫一送多收。这种区段不由码位文件中的区段来解析，而使用道岔来解析。道岔占用就表示区段占用。</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u899" class="ax_default _图片_">
        <img id="u899_img" class="img " src="images/7_联锁接口文件说明/u899.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u900" class="ax_default _图片_">
        <img id="u900_img" class="img " src="images/7_联锁接口文件说明/u900.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u901" class="ax_default _图片_">
        <img id="u901_img" class="img " src="images/7_联锁接口文件说明/u901.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u902" class="ax_default _文本段落">
        <div id="u902_div" class=""></div>
        <div id="u902_text" class="text ">
          <p style="font-size:28px;"><span>注意，表示灯T1710GZCMARK这四位以前表示照查灯，但目前不再使用 只占位。照查灯目前使用ZCJ1-4表示，与站场图上的灯位对应为2 上左 1上右，4下左，3下右</span></p><p style="font-size:28px;"><span><br></span></p><p style="font-size:48px;"><span>注意铅封计数qfcount每个占2个字节，在接口文件中没有提及，需要特别注意</span></p><p style="font-size:48px;"><span>之后的报警 每个1位，1代表有报警，0代表没有报警</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u903" class="ax_default _图片_">
        <img id="u903_img" class="img " src="images/7_联锁接口文件说明/u903.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u904" class="ax_default _文本段落">
        <div id="u904_div" class=""></div>
        <div id="u904_text" class="text ">
          <p><span>按钮表文件：</span></p><p><span>按钮表表示按钮序号，规则为</span></p><p><span><br></span></p><p><span>序号 = 按钮名称 = 按钮类型</span></p><p><span><br></span></p><p><span>例如第一条</span></p><p><span>1 = SR = LA表示序号1 SR按钮 它是列车按钮</span></p><p><span>在传输控制命令时，</span></p><p><span>首先填上控制指令，再根据按下顺序 填入按钮序号，每个按钮序号用2个字节表示。</span></p><p><span>具体填入方式，参照分配表</span></p><p><span style="color:#FF0000;">注意：</span></p><p><span style="color:#FF0000;">&nbsp;非进路1 和非进路故障1 划入辅助功能指令，发送按照 0xaa + 序号的方式发送</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u905" class="ax_default _图片_">
        <img id="u905_img" class="img " src="images/7_联锁接口文件说明/u905.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u906" class="ax_default _图片_">
        <img id="u906_img" class="img " src="images/7_联锁接口文件说明/u906.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u907" class="ax_default _文本段落">
        <div id="u907_div" class=""></div>
        <div id="u907_text" class="text ">
          <p><span>控制权限的交接</span></p><p><span>联锁给MDIAS发送自律控制请求，</span></p><p><span>MDIAS检查自身条件满足，5秒内回复同意帧</span></p><p><span>MDIAS在收到联锁的运行报告帧中控制模式变为自律控制（0x55），则表示控制权限交给MDIAS</span></p><p><span style="color:#FF0000;">注意:MDIAS拿到控制权限后初始使用集控模式，通过站场图上的操作可转换为自控模式。自控和集控只是MDIAS内部的控制模式，与联锁无关，联锁只判断是否把控制权限交给MDIAS，即自律控制与联锁控制</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u908" class="ax_default _图片_">
        <img id="u908_img" class="img " src="images/7_联锁接口文件说明/u908.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u909" class="ax_default _图片_">
        <img id="u909_img" class="img " src="images/7_联锁接口文件说明/u909.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u910" class="ax_default _文本段落">
        <div id="u910_div" class=""></div>
        <div id="u910_text" class="text ">
          <p><span>LA =列车按钮</span></p><p><span>YA= 引导按钮</span></p><p><span>YZSA=引导总锁按钮</span></p><p><span>DA=调车按钮</span></p><p><span>CA=道岔按钮</span></p><p><span>CQ=道岔区段</span></p><p><span>WC=无岔区段</span></p><p><span>DG=股道</span></p><p><span>BTN=button按钮</span></p><p><span><br></span></p><p><span><br></span></p><p><span><br></span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u911" class="ax_default _文本段落">
        <div id="u911_div" class=""></div>
        <div id="u911_text" class="text ">
          <p><span>联锁表约定了站场中所有合法进路。</span></p><p><span>首先进路区分为列车进路（收发车进路）和调车进路。第一列就说明了本条进路属于列车进路还是调车进路。</span></p><p><span><br></span></p><p><span>方向： 接车时，列车的行进方向为从转换轨往场段内开，发车时，列车的行进方向为从场段内往转换轨开。在联锁表中 通过 “由”和“至”来判断方向。</span></p><p><span>例如： </span></p><p><span>接车 进路Sr至23AG 表示方向为从sr信号机到23AG股道的进路。</span></p><p><span>发车进路 Xc口 由X21&nbsp; 表示从X21信号机发车到Xc。</span></p><p><span>调车由D11 至D1G 表示从D11调车信号机调往D1G转换轨。</span></p><p><span><br></span></p><p><span>按钮： 按钮表示排列本条进路需要使用到的按钮</span></p><p><span><br></span></p><p><span>信号机：表示信号机名称和点灯颜色。</span></p><p><span><br></span></p><p><span>道岔：</span></p><p><span>表示本条进路会影响到的道岔，以及这些道岔的状态，“/”表示双动道岔。例如5/7 表示 5道岔和7道岔同时会同时被锁定在定位。（25/27）表示25道岔和27道岔会同时被锁定在反位</span></p><p><span><br></span></p><p><span>敌对信号机：</span></p><p><span>表示本条进路会影响到的其他信号机，本条信号机办理之后，敌对信号机表中出现的信号机都不能办理进路。</span></p><p><span>例如：Sc口 发车 由X21 这条进路的敌对信号为X21D，D29,&lt;21/23&gt;Sc Sr D13</span></p><p><span>表示 办理本条发车进路后，X21信号机不能办理调车进路，D29 调车信号机不能办理调车进路，当21/23道岔在反位时，Sc Sr D13信号机不能办理进路。</span></p><p><span><br></span></p><p><span>轨道区段：表示本条进路影响到的区段都需要空闲。</span></p><p><span><br></span></p><p><span>迎面进路：</span></p><p><span>表示与本条进路出现迎面冲突的进路，本条进路排列后，迎面进路不允许排。例如接车进路Sr至23AG 他的迎面进路是调车23AG， 23AG正在接车，列车会从转换轨开往23AG，这时如果从23BG把车调往23AG，就会出现辆车迎面相撞的可能，因此，不允许执行23AG的所有调车进路。</span></p><p><span><br></span></p><p><span>其他联锁</span></p><p><span>正线照查：表示排列本条进路时需要检查其对应的照查灯状态，照查灯熄灭时运行排列。</span></p><p><span>例如由Xr 到Sr扣发车,需要满足本口的照查灯状态是否熄灭，如图所示</span></p><p><span>照查灯点亮时机为 正线往其排列进路时会点亮，例如接车时。</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u912" class="ax_default _图片_">
        <img id="u912_img" class="img " src="images/7_联锁接口文件说明/u912.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u913" class="ax_default _图片_">
        <img id="u913_img" class="img " src="images/7_联锁接口文件说明/u913.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u914" class="ax_default _图片_">
        <img id="u914_img" class="img " src="images/7_联锁接口文件说明/u914.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u915" class="ax_default _图片_">
        <img id="u915_img" class="img " src="images/7_联锁接口文件说明/u915.png"/>
      </div>
    </div>
  </body>
</html>
